<!DOCTYPE html>
<html>
<head>
	<meta charset='utf-8' />
	<title>Bus Locations</title>
	<meta name='viewport' content='initial-scale=1,maximum-scale=1,user-scalable=no' />
	<script src='https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.js'></script>
	<link href='https://api.mapbox.com/mapbox-gl-js/v2.5.1/mapbox-gl.css' rel='stylesheet' />
	<style>
		body { margin: 0; padding: 0; }
		#map { position: absolute; top: 0; bottom: 0; width: 100%; }
	</style>
</head>
<body>
	<div id='map'></div>
	<script>
		mapboxgl.accessToken = 'pk.eyJ1IjoibW9vb2IiLCJhIjoiY2xmNjhmNmU3MWptYzNxbGhqdnNrc3hmYSJ9.y6fr5WQfMHummOjH2y2fHg';
		var map = new mapboxgl.Map({
			container: 'map',
			style: 'mapbox://styles/mapbox/streets-v11',
			center: [103.8198, 1.3521], // Center map on Singapore
			zoom: 11
		});

		var busLocations = {
			"type": "FeatureCollection",
			"features": [
				{
					"type": "Feature",
					"geometry": {
						"type": "Point",
						"coordinates": [103.9728905, 1.36219]
					},
					"properties": {
						"title": "Bus 2",
						"description": "Next Stop: 10499"
					}
				},
				{
					"type": "Feature",
					"geometry": {
						"type": "Point",
						"coordinates": [103.95815766666666, 1.357313]
					},
					"properties": {
						"title": "Bus 4",
						"description": "Next Stop: 75009"
					}
				}
			]
		};

		// add markers to map
		busLocations.features.forEach(function(marker) {
			// create a HTML element for each feature
			var el = document.createElement('div');
			el.className = 'marker';
			// make a marker for each feature and add to the map
			new mapboxgl.Marker(el)
				.setLngLat(marker.geometry.coordinates)
				.setPopup(new mapboxgl.Popup({ offset: 25 }) // add popups
					.setHTML('<h3>' + marker.properties.title + '</h3><p>' + marker.properties.description + '</p>'))
				.addTo(map);
		});

	</script>
</body>
</html>
